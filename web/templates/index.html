{% extends "_base.html" %}

{% block content %}
<div class="container">
  <div>
    <h1 class="display-4">Create and manage databases</h1>
    
    {% with messages = get_flashed_messages() %}
    {% if messages %}
      {% for message in messages %}
      <div class="alert alert-success" role="alert">{{ message }}</div>
      {% endfor %}
    {% endif %}
    {% endwith %}
    <p>Password for database is always 123456</p>
  </div>
  <hr>
  <form class="form-inline" method="get" action="create/" id="dbform">
    <div class="form-group mx-sm-3">
      <input class="form-control" id="name" name="name" placeholder="Database name">
    </div>
    <div class="form-group mx-sm-3">
      <span class="badge badge-pill badge-warning invisible" id="duplabel">DB already exists</span>
    </div>
    <button type="submit" class="btn btn-primary" id="dbcreatebutton">Create database</button>
  </form>

  <br/>

  <div>
      <table class="table">
          <thead>
            <tr>
              <th scope="col">Database name</th>
              <th scope="col">Database user</th>
              <th scope="col">Delete</th>
            </tr>
          </thead>
          <tbody>
              {% for db in db_list %}
              <tr>
                  <td>{{ db[0] }}</td>
                  <td>{{ db[0] }}_user</td>
                  <td><a href="{{ url_for('delete', name=db[0]) }}">Delete</a></td>
              </tr>
              {% endfor %}
          </tbody>
    </table>
  </div>
</div>
{% endblock %}


{% block scripts %}
<script src="static/main.js"></script>
{% endblock %}